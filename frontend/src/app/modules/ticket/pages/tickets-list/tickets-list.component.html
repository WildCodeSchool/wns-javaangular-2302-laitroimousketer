<!-- PARTIE DEV ET MANAGER -->
<section class="tickets-list-c" [@fadeInOut]>
  <app-search-bar *ngIf="role !== 'CLIENT'"></app-search-bar>


  <div class="tickets-list" *ngIf="role !== 'CLIENT'">
    <header>
      <mat-form-field class="select">
        <mat-label>Trier par</mat-label>
        <mat-select class="select" (selectionChange)="onSortChange($event)">
          <mat-option *ngFor="let state of states" [value]="state">
            {{state}}
            <span *ngIf="state.includes('asc') || state.includes('A-Z')" class="icone-select bi bi-sort-down"></span>
            <span *ngIf="state.includes('desc') || state.includes('Z-A')" class="icone-select bi bi-sort-up"> </span>
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-slide-toggle class="toggle" (click)="ViewArchivedTickets()">
        <p>Tickets archivés</p>
      </mat-slide-toggle>

      <div class="checkbox-c">

        <div class="category">Catégorie:
          <mat-checkbox class="checkbox" [checked]="filters.category.billing"
            (change)="onCheckboxChange('category', 'billing')">facturation<span
              class="badge">{{this.billingCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.category.feature"
            (change)="onCheckboxChange('category', 'feature')">fonctionnalité<span
              class="badge">{{this.featureCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.category.technical"
            (change)="onCheckboxChange('category', 'technical')">technique<span
              class="badge">{{this.technicalCount}}</span></mat-checkbox>
        </div>

        <div class="statut">Statut:
          <mat-checkbox class="checkbox" [checked]="filters.status.to_do"
            (change)="onCheckboxChange('status', 'to_do')">à faire<span
              class="badge">{{this.toDoCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.status.doing"
            (change)="onCheckboxChange('status', 'doing')">en cours <span class="badge">
              {{this.doingCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.status.done"
            (change)="onCheckboxChange('status', 'done')">terminé<span
              class="badge">{{this.doneCount}}</span></mat-checkbox>
        </div>

        <div class="priority">Priorité:
          <mat-checkbox class="checkbox" [checked]="filters.priority.low"
            (change)="onCheckboxChange('priority', 'low')">faible<span
              class="badge">{{this.lowCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.priority.medium"
            (change)="onCheckboxChange('priority', 'medium')">moyenne<span
              class="badge">{{this.mediumCount}}</span></mat-checkbox>
          <mat-checkbox class="checkbox" [checked]="filters.priority.high"
            (change)="onCheckboxChange('priority', 'high')">haute<span
              class="badge">{{this.highCount}}</span></mat-checkbox>
        </div>

      </div>

    </header>

      <div *ngFor="let ticket of tickets; let i = index"
        [ngClass]="{'even': isEven(i), 'odd': !isEven(i)}">
        <app-ticket-card class="context-ticket-list" [ticket]="ticket"></app-ticket-card>
      </div>
      
  </div>

  <app-tickets-list-client></app-tickets-list-client>
</section>