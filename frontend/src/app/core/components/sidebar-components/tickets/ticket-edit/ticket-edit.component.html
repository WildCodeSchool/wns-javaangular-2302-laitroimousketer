<div class="widget">
  <div class="widget-title">
    <i class="bi bi-pencil-square"></i><span class="first-word"> Modifier le</span> ticket
  </div>


  <form [formGroup]="ticketEditForm" class="grid grid-cols-1 gap-20">


    <mat-form-field appearance="outline" color="primary" [ngClass]="isSmallScreen ? 'dense-5' : ''">
      <mat-label for="title">Titre</mat-label>
      <input matInput type="text" id="title" formControlName="title" placeholder="Renseigner le thème du sujet">
    </mat-form-field>


    <mat-form-field appearance="outline" color="primary"  [ngClass]="isSmallScreen ? 'dense-5' : ''">
      <mat-label id="priority">Priorité</mat-label>
      <mat-select id="priority" formControlName="selectedPriority" name="selectedPriority">
        <mat-option [value]="ticket?.priority">{{ticket?.priority?.priorityTitle}}</mat-option>
        @for (priority of priorities; track priority.id) {
        <mat-option [value]="priority">{{priority.priorityTitle}}</mat-option>
        }
      </mat-select>
    </mat-form-field>


    <mat-form-field appearance="outline" color="primary"  [ngClass]="isSmallScreen ? 'dense-5' : ''">
      <mat-label for="category">Catégorie</mat-label>
      <mat-select id="category" formControlName="selectedCategory" name="selectedCategory" >
        <mat-option [value]="ticket?.category">
          {{ ticket?.category?.categoryTitle }}
        </mat-option>
        @for (category of categories; track category.id) {
        <mat-option [value]="category">{{category.categoryTitle}}</mat-option>
        }
      </mat-select>
    </mat-form-field>

   
    
    <mat-form-field appearance="outline" color="primary"  [ngClass]="isSmallScreen ? 'dense-5' : ''">
      <mat-label for="status">Status</mat-label>
      <mat-select id="status" matNativeControl formControlName="selectedStatus" name="selectedStatus">
        <mat-option [value]="ticket?.status">{{ticket?.status?.statusTitle}}</mat-option>
        @for (status of statuses; track status.id) {
        <mat-option [value]="status">{{status.statusTitle}}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline" color="primary"  [ngClass]="isSmallScreen ? 'dense-5' : ''">
      <mat-label for="description">Description</mat-label>
      <textarea id="description" matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="10"
        cdkAutosizeMaxRows="auto" placeholder="Expliquer avec détails votre problèmatique"
        formControlName="description"></textarea>
    </mat-form-field>

    <div class="actions">
      <button mat-raised-button color="accent" class="btn" type="button" [disabled]="!ticketEditForm.valid"
        (click)="editTicket()"><i class="bi bi-check-lg"></i> Modifier le ticket</button>
      <a class="cancel" (click)="onAnnulate()">Annuler</a>
    </div>
  </form>
</div>