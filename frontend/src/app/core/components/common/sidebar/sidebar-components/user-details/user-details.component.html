<app-sidebar-menu [menuItems]="menuItems" [menuTitle]="menuTitle" [menuIcon]="menuIcon"
  (page)="onPageChange($event)"></app-sidebar-menu>

<header class="widget details" *ngIf="user">

  <div class="details-profil">
    <div class="title-user">
      <app-avatar [userName]="this.fullname" class="context-ticket-card-creator"></app-avatar>
      <h1 class="firstname"> {{user.firstname}}<span class="lastname">{{user.lastname}}</span>
      </h1>
    </div>
    <div><span class="prefix">Email:</span> {{user.email}}</div>
    <div><span class="prefix">Role:</span> {{user.role.roleTitle}}</div>
  </div>



  @if (user.address) {
  <div class="localisation-c">
    <div class="widget-small-title"><i class="bi bi-geo-alt-fill"></i>Localisation</div>
    <div class="localisation">
      <div class="country"><span class="prefix">Pays:</span>{{user.address.country}}</div>
      <div class="city"><span class="prefix">Ville:</span>{{user.address.city}}</div>
      <div class="postal-code"><span class="prefix">Code postal:</span>{{user.address.postcode}}</div>
      <span class="prefix">Adresse:</span>
      <div class="address">{{user.address.street_l1}}</div>
      <div class="address">{{user.address.street_l2}}</div>
    </div>
  </div>
  }

  <div class="contact-c">
    <div class="widget-small-title"><i class="bi bi-person-vcard-fill"></i> Informations de contact</div>
    <div class="contact">
      <div class="prefix">Mail:</div>
      <div class="country">{{user.email}}</div>
      <div *ngIf="user.phone" class="prefix">Téléphone:</div>
      <div *ngIf="user.phone" class="city">{{user.phone}}</div>
    </div>
  </div>
</header>




<div class="widget user-tickets">
  <div class="widget-title"><i class="bi bi-bookmarks-fill"></i>Tickets <span>de l'utilisateur</span></div>
  @for (ticket of userTickets; track ticket) {
  <app-ticket-card [ticket]="ticket"></app-ticket-card>
  }
</div>

@if (page ==='Actions') {
<div class="widget actions" [@opacity]="page==='Actions'?'active':''">
  <h1 class="weight-500">Actions sur l'utilisateur</h1>

  <div class="buttons-actions">
    <button mat-raised-button color="primary" class="btn" (click)="sendMail()"><i
        class="bi bi-envelope-arrow-up-fill"></i> Envoyer un
      mail</button>
    @if (roleUserConnected === 'Manager') {
    <button mat-raised-button color="warn" class="btn" (click)="deleteUser(this.user.id)"><i
        class=" bi bi-archive-fill"></i>
      Supprimer</button>
    }
  </div>

</div>

}